@model Inmobiliaria10.Models.Pago
@{
    ViewData["Title"] = "Baja de pago";
}

<div id="content" class="d-flex justify-content-center align-items-center">
    <div class="form-card w-100" style="max-width: 700px;">
        <h2 class="form-title text-danger">Baja de pago</h2>

        <div class="alert alert-warning">
            ¿Confirmás eliminar el pago <strong>#@Model.IdPago</strong>?
            <div class="mt-2 small">
                <strong>Fecha:</strong> @Model.FechaPago:yyyy-MM-dd ·
                <strong>Importe:</strong> @Model.Importe.ToString("C") ·
                <strong>Contrato:</strong> @Model.IdContrato
            </div>
        </div>

        <form asp-action="Borrar" asp-route-id="@Model.IdPago" method="post" id="frmDelete">
            @Html.AntiForgeryToken()
            <div class="d-flex gap-2 justify-content-between">
                <a class="btn btn-back" asp-action="Detalles" asp-route-id="@Model.IdPago">
                    <i class="bi bi-arrow-left"></i> Cancelar
                </a>
                <button type="submit" class="btn btn-danger">
                    <i class="bi bi-trash"></i> Eliminar
                </button>
            </div>
        </form>
    </div>
</div>

@section Scripts{
  <!-- Quitar si SweetAlert2 ya está en el _Layout -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    // Confirmación con SweetAlert antes de enviar el POST
    document.getElementById('frmDelete')?.addEventListener('submit', async (e) => {
      e.preventDefault();
      const r = await Swal.fire({
        title: '¿Eliminar pago?',
        text: 'Se registrará la baja lógica del pago.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar',
        reverseButtons: true
      });
      if (r.isConfirmed) e.target.submit();
    });
  </script>
}
